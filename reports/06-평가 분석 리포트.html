<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>평가 분석 리포트</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #17A2B8;
            --accent-color: #FFC107;
            --success-color: #28A745;
            --warning-color: #FFC107;
            --danger-color: #DC3545;
            --info-color: #17A2B8;
            --background-color: #F9FAFB;
            --text-color: #333333;
            --border-color: #E5E5E5;
        }
        body {
            font-family: "Noto Sans KR", sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 40px;
        }
        h1 {
            font-size: 28px;
            color: #1a1a1a;
            margin-bottom: 24px;
            font-weight: 700;
        }
        h2 {
            font-size: 24px;
            color: var(--text-color);
            margin-top: 40px;
            margin-bottom: 16px;
            font-weight: 700;
        }
        h3 {
            font-size: 20px;
            color: var(--text-color);
            margin-bottom: 12px;
            font-weight: 500;
        }
        p, li {
            font-size: 16px;
            margin-bottom: 12px;
        }
        .card {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 24px;
        }
        .col-6 {
            grid-column: span 6;
        }
        .col-12 {
            grid-column: span 12;
        }
        .chart {
            margin-bottom: 40px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }
        .alert {
            padding: 16px;
            border-radius: 4px;
            margin-bottom: 24px;
            color: white;
        }
        .alert-info {
            background-color: var(--info-color);
        }
        .alert-success {
            background-color: var(--success-color);
        }
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .col-6 {
                grid-column: span 12;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>평가 분석 리포트</h1>
            <div class="card">
                <div class="grid">
                    <div class="col-6">
                        <p><strong>이름:</strong> 김하늘</p>
                        <p><strong>학년:</strong> 3학년</p>
                    </div>
                    <div class="col-6">
                        <p><strong>평가 날짜:</strong> 2024-09-11</p>
                        <p><strong>학습 경로 단계:</strong> 2단계 (수학 기초 과정)</p>
                    </div>
                </div>
            </div>
        </header>

        <section>
            <h2>평가 성취도 요약</h2>
            <div class="grid">
                <div class="col-6">
                    <div class="chart" id="overallScoreChart"></div>
                </div>
                <div class="col-6">
                    <div class="alert alert-info">
                        <h3>AI 성취도 분석</h3>
                        <p>수학 문제 풀이 속도가 평균보다 빠르며, 응용 문제에서 높은 성과를 보임. 기본 개념 문제에서의 정답률이 60%로 낮아 보충 학습이 필요함.</p>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>문제 유형별 성취도</h2>
            <div class="chart" id="problemTypeChart"></div>
        </section>

        <section>
            <h2>오답 분석</h2>
            <div class="chart" id="incorrectAnswerChart"></div>
        </section>

        <section>
            <h2>성취도 변화 추적</h2>
            <div class="chart" id="achievementChangeChart"></div>
        </section>

        <section>
            <h2>AI 추천 학습 경로</h2>
            <div class="alert alert-success">
                <h3>추천 학습 경로</h3>
                <p>수학 기본 개념 강화 과정 추천 (4주 과정), 매일 30분씩 학습.</p>
            </div>
        </section>

        <section>
            <h2>학습자 성취도 분석</h2>
            <div class="card">
                <p>기본 개념 문제 정답률이 낮은 학습자는 이 부분에 대한 보충 학습을 권장합니다.</p>
            </div>
        </section>

        <section>
            <h2>AI 학습 경로 제안</h2>
            <div class="card">
                <p>응용 문제 학습이 충분히 이루어졌으므로, 고난도 문제 풀이에 집중하는 학습 경로를 추천합니다.</p>
            </div>
        </section>

        <section>
            <h2>교수자 피드백</h2>
            <div class="card">
                <p>"수의 연산에 대한 이해가 부족하므로, 다음 학습에서 이 부분을 중점적으로 다뤄보세요."</p>
            </div>
        </section>

        <section>
            <h2>최종 결론</h2>
            <div class="card">
                <p><strong>성취도 요약:</strong> 학습자는 전체 평가에서 85%의 성취도를 보였으며, 응용 문제에 강점이 있지만 기본 개념에서 어려움을 겪고 있음.</p>
                <p><strong>보충 학습 제안:</strong> AI가 추천한 보충 학습 경로를 따라, 매일 기본 개념 문제 풀이를 30분씩 연습하는 것을 권장.</p>
                <p><strong>향후 계획:</strong> 4주 후에 다시 평가를 통해 성취도 변화를 추적하고, 그에 따라 새로운 학습 경로를 제안할 예정.</p>
            </div>
        </section>
    </div>

    <script>
        // 데이터
        const overallScore = 85;
        const problemTypeData = [
            { type: '기본 개념 문제', score: 60 },
            { type: '응용 문제', score: 90 },
            { type: '고난도 문제', score: 70 }
        ];
        const incorrectAnswerData = [
            { category: '수의 연산', percentage: 70 },
            { category: '기타', percentage: 30 }
        ];
        const achievementChangeData = [
            { evaluation: '1회차', score: 85 },
            { evaluation: '2회차', score: 87 },
            { evaluation: '3회차', score: 80 },
            { evaluation: '4회차', score: 90 },
            { evaluation: '5회차', score: 85 }
        ];

        // 전체 성취도 파이 차트
        const overallScoreChart = d3.select("#overallScoreChart")
            .append("svg")
            .attr("width", 200)
            .attr("height", 200)
            .append("g")
            .attr("transform", "translate(100,100)");

        const arc = d3.arc()
            .innerRadius(70)
            .outerRadius(90);

        const pie = d3.pie()
            .value(d => d.value)
            .sort(null);

        const data = pie([
            { value: overallScore },
            { value: 100 - overallScore }
        ]);

        overallScoreChart.selectAll('path')
            .data(data)
            .enter()
            .append('path')
            .attr('d', arc)
            .attr('fill', (d, i) => i === 0 ? "#0056b3" : "#E5E5E5");

        overallScoreChart.append("text")
            .attr("text-anchor", "middle")
            .attr("dy", "0.35em")
            .text(`${overallScore}%`)
            .style("font-size", "24px")
            .style("font-weight", "bold");

        // 문제 유형별 성취도 막대 차트
        const problemTypeChart = d3.select("#problemTypeChart")
            .append("svg")
            .attr("width", 600)
            .attr("height", 300);

        const x = d3.scaleBand()
            .range([0, 550])
            .padding(0.1);

        const y = d3.scaleLinear()
            .range([250, 0]);

        x.domain(problemTypeData.map(d => d.type));
        y.domain([0, 100]);

        problemTypeChart.append("g")
            .attr("transform", "translate(40,250)")
            .call(d3.axisBottom(x));

        problemTypeChart.append("g")
            .attr("transform", "translate(40,0)")
            .call(d3.axisLeft(y));

        problemTypeChart.selectAll(".bar")
            .data(problemTypeData)
            .enter().append("rect")
            .attr("class", "bar")
            .attr("x", d => x(d.type) + 40)
            .attr("width", x.bandwidth())
            .attr("y", d => y(d.score))
            .attr("height", d => 250 - y(d.score))
            .attr("fill", "#0056b3");

        // 오답 분석 파이 차트
        const incorrectAnswerChart = d3.select("#incorrectAnswerChart")
            .append("svg")
            .attr("width", 300)
            .attr("height", 300)
            .append("g")
            .attr("transform", "translate(150,150)");

        const incorrectArc = d3.arc()
            .innerRadius(0)
            .outerRadius(100);

        const incorrectPie = d3.pie()
            .value(d => d.percentage)
            .sort(null);

        const incorrectData = incorrectPie(incorrectAnswerData);

        incorrectAnswerChart.selectAll('path')
            .data(incorrectData)
            .enter()
            .append('path')
            .attr('d', incorrectArc)
            .attr('fill', (d, i) => i === 0 ? "#DC3545" : "#FFC107");

        // 성취도 변화 추적 선 그래프
        const achievementChangeChart = d3.select("#achievementChangeChart")
            .append("svg")
            .attr("width", 600)
            .attr("height", 300);

        const xChange = d3.scaleBand()
            .range([0, 550])
            .padding(0.1);

        const yChange = d3.scaleLinear()
            .range([250, 0]);

        xChange.domain(achievementChangeData.map(d => d.evaluation));
        yChange.domain([0, 100]);

        achievementChangeChart.append("g")
            .attr("transform", "translate(40,250)")
            .call(d3.axisBottom(xChange));

        achievementChangeChart.append("g")
            .attr("transform", "translate(40,0)")
            .call(d3.axisLeft(yChange));

        const line = d3.line()
            .x(d => xChange(d.evaluation) + xChange.bandwidth() / 2 + 40)
            .y(d => yChange(d.score));

        achievementChangeChart.append("path")
            .datum(achievementChangeData)
            .attr("fill", "none")
            .attr("stroke", "#0056b3")
            .attr("stroke-width", 2)
            .attr("d", line);

        achievementChangeChart.selectAll(".dot")
            .data(achievementChangeData)
            .enter().append("circle")
            .attr("class", "dot")
            .attr("cx", d => xChange(d.evaluation) + xChange.bandwidth() / 2 + 40)
            .attr("cy", d => yChange(d.score))
            .attr("r", 4)
            .attr("fill", "#0056b3");
    </script>
</body>
</html>